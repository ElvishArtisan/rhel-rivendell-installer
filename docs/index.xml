<?xml version="1.0" encoding="ISO-8859-1"?>
<article xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink">
<info>
  <title>Installing Rivendell 4 on a RHEL-8 System</title>
  <author>
    <personname>
      <firstname>Fred</firstname>
      <surname>Gleason</surname>
      <email>fredg@paravelsystems.com</email>
    </personname>
  </author>
</info>

<sect1>
  <title>Warning</title>
  <para>
    This installation HOWTO and the version of Rivendell that it
    installs are intended for testing purposes only. As such, it is quite
    likely that they contain bugs, including serious ones that could lead
    to LOSS OF DATA! DO NOT use this HOWTO for creating production systems!
  </para>
</sect1>

<sect1>
  <title>Introduction</title>
  <sect2>
    <title>Overview</title>
    <para>
      This HOWTO contains procedures for installing the
      Rivendell Radio Automation System on a system running RHEL-8.
      While the screenshots are specific to RHEL-8, these instructions
      are also applicable to other RedHat Enterprise 8 (RHEL-8) -based
      distributions.
    </para>
    <para>
      Installing Rivendell on RHEL-8 consists of three primary steps:
    </para>
    <orderedlist>
      <listitem>
	<para>
	  Install the base distribution and establish an Internet connection.
	</para>
      </listitem>
      <listitem>
	<para>
	  Bootstrap and run the installation script.
	</para>
      </listitem>
      <listitem>
	<para>
	  Secure accounts and finish up final details.
	</para>
      </listitem>
    </orderedlist>
  </sect2>
  <sect2>
    <title>Prerequisites</title>
    <para>
      The following items are required to complete the installation.
    </para>
    <itemizedlist>
      <listitem>
	<para>
	  Target hardware. 64 bit (x86_64) AMD or Intel architecture
	  is supported. For the purposes of this HOWTO, the target machine
	  will be assumed to have a single, blank hard drive. Installations
	  utilizing multiple hard drives (including RAID arrays) are
	  possible, but beyond the scope of this HOWTO.
	</para>
      </listitem>
      <listitem>
	<para>
	  A 'DVD' ISO installer image for RHEL-8, available at
	  <link xlink:href="https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux">
	    https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux</link>.
	    After downloading the ISO image, make a "bootable" USB
	    key using
	    <link xlink:href="https://wiki.centos.org/HowTos/InstallFromUSBkey">
	      these instructions</link>.
	</para>
      </listitem>
      <listitem>
	<para>
	  A working Internet connection.
	</para>
      </listitem>
    </itemizedlist>
  </sect2>
</sect1>

<sect1>
  <title>Installing the Base Distribution</title>
  <para>
    Boot the RHEL-8 installation media (DVD or USB key). You should wind
    up at the initial boot screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-bootscreen.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Highlight the <computeroutput>Install Red Hat Enterprise Linux 8</computeroutput>
    prompt and then press <userinput>Enter</userinput> to start the
    installation.
  </para>
  <para>
    You will be asked to specify the language to use for the install.
    Choose and then touch the <computeroutput>Continue</computeroutput>
    button.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-setlanguage.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    You should then be brought to the
    <computeroutput>INSTALLATION SUMMARY</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationsummary.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>INSTALLATION DESTINATION</computeroutput>
    item to bring up the 
    <computeroutput>INSTALLATION DESTINATION</computeroutput> screen.
    In the <computeroutput>Other Storage Options</computeroutput> section,
    change the <computeroutput>Partitioning</computeroutput> selection from
    <computeroutput>Automatically configure partitioning</computeroutput> to
    <computeroutput>I will configure partitioning.</computeroutput>.
  </para>
  <warning>
    Do <emphasis>NOT</emphasis> use automatic partitioning! Doing so will
    waste large amounts of disc space while resulting in an installation
    with very little space available for storage of audio!
  </warning>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationdestination.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Done</computeroutput> button to bring up the
    <computeroutput>MANUAL PARTITIONING</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-manualpartitioning.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    If there are any existing partitions on the system, delete them by touching
    the <computeroutput>-</computeroutput> button. Then, change the
    paritioning scheme from <computeroutput>LVM</computeroutput> to
    <computeroutput>Standard Partition</computeroutput>.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-manualpartitioning_standard.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>+</computeroutput> button to bring up the
    <computeroutput>ADD A NEW MOUNT POINT</computeroutput> dialog.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-addnewmountpoint.png" scale="50"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Pull down the <computeroutput>Mount Point:</computeroutput> list and
    scan the entries. If you see a <computeroutput>/boot/efi</computeroutput>
    entry, select it, then enter <userinput>1G</userinput> in the
    <computeroutput>Desired Capacity:</computeroutput> field, then
    touch the <computeroutput>Add mount point</computeroutput> button.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-addnewmountpointefi.png" scale="50"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Repeat the above procedure, adding the following mount points:
  </para>
  <para>
    <table xml:id="table.mountpoints" frame="all">
      <title>Mount Points</title>
      <tgroup cols="2" align="left" colsep="1" rowsep="1">
	<colspec colname="mountpoint" />
	<colspec colname="desiredcapacity" />
	<thead>
	  <row><entry>Mount Point</entry><entry>Desired Capacity</entry></row>
	</thead>
	<tbody>
	  <row><entry>swap</entry><entry>8192M</entry></row>
	  <row><entry>/</entry><entry>25G</entry></row>
	  <row><entry>/home</entry><entry>100G</entry></row>
	  <row><entry>/var</entry><entry>[leave blank]</entry></row>
	</tbody>
      </tgroup>
    </table>
  </para>
  <para>
    After all mount points have been added, touch the
    <computeroutput>Done</computeroutput> button. You may see a
    <computeroutput>SUMMARY OF CHANGES</computeroutput> dialog asking you
    to confirm the partitioning. Touch the
    <computeroutput>Accept Changes</computeroutput> button and return to
    the <computeroutput>INSTALLATION SUMMARY</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationsummary1.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Root Password</computeroutput> item to bring
    up the <computeroutput>ROOT PASSWORD</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationsummary2.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Enter a password in the two fields. and then touch the
    <computeroutput>Done</computeroutput> button to return to the
    <computeroutput>SUMMARY OF CHANGES</computeroutput> screen.
    <warning>
      DO NOT FORGET WHAT YOU ENTER HERE, AS
      YOU WILL NEED IT TO MANAGE YOUR RIVENDELL SYSTEM!
    </warning>
  </para>
  <para>
    Touch the <computeroutput>User Creation</computeroutput> item to bring
    up the <computeroutput>CREATE USER</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-createuser.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Create a user called <userinput>rd</userinput>, using the settings as
    shown, and then touch the <computeroutput>Done</computeroutput> button
    to return to the <computeroutput>INSTALLATION SUMMARY</computeroutput>
    screen.
  </para>
  <caution>
    To ensure system security, use a password that is different from
    the one used for the <computeroutput>root</computeroutput>.
  </caution>
  <para>
    Touch the <computeroutput>Begin Installation</computeroutput> button
    to apply your partitioning settings and install RHEL.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationprogress.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    When installation is complete, touch the
    <computeroutput>Reboot System</computeroutput> button.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationcomplete.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    The system will reboot and come up to the
    <computeroutput>INITIAL SETUP</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-initialsetup.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>License Information</computeroutput> button
    to bring up the <computeroutput>License Information</computeroutput>
    screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-licenseinformation.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Tick the <computeroutput>I accept the license agreement</computeroutput>
    checkbox and then touch the <computeroutput>Done</computeroutput>
    button to return to the <computeroutput>INITIAL SETUP</computeroutput>
    screen.
  </para>
  <!--
      Add Subscription Manager description here!
  -->
  <para>
    Touch the <computeroutput>FINISH CONFIGURATION</computeroutput> button.
    Then Login screen will then appear.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-loginscreen.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Click the <computeroutput>Rivendell Audio</computeroutput> item and
    enter the user password that was set earlier.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-passwordscreen.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    The system will log in
    and display the <computeroutput>Welcome!</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-welcome.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Choose the desired language and then touch the
    <computeroutput>Next</computeroutput> button to bring up the
    <computeroutput>Typing</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-typing.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Choose the desired keyboard layout and then touch the
    <computeroutput>Next</computeroutput> button to bring up the
    <computeroutput>Privacy</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-privacy.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Set the <computeroutput>Location Services</computeroutput> as desired
    then touch the <computeroutput>Next</computeroutput> button to bring
    up the <computeroutput>Connect Your Online Accounts</computeroutput>
    screen. Touch the <computeroutput>Skip</computeroutput> button to
    bring up the <computeroutput>Ready to Go</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-readytogo.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the
    <computeroutput>Start Using Red Hat Enterprise Linux</computeroutput>
    button to bring up the <computeroutput>Getting Started</computeroutput>
    window.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-gettingstarted.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the 'X' in the upper right-hand corner to dismiss the
    window and show the Gnome Desktop.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-gnomedesktop.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the Down Arrow in the upper right-hand corner of the desktop and
    then touch the &quot;Tool&quot; icon to open the
    <computeroutput>Settings</computeroutput> applet.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-settings.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Network</computeroutput> item in the left-hand
    pane and configure network access as is appropriate for your site.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-network.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Next, touch the <computeroutput>Details</computeroutput> item in the
    left-hand pane and set the host name of the machine in the
    <computeroutput>Device Name</computeroutput> field. The host name
    should be all lower-case, alphanumeric and not more than 32 characters.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-details-about.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>

  <para>
    Next, open a <computeroutput>Terminal</computeroutput> by touching the
    &quot;Activities&quot; item in the upper left-hand corner of the desktop
    and then the <computeroutput>Terminal</computeroutput> icon.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-startterminal.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Enter the following into the terminal to
    elevate its privileges to <userinput>root</userinput>:
  </para>
  <para>
    <userinput>su -</userinput>
  </para>
  <para>
    You will be prompted for the user &quot;rd&quot; password. Type it,
    and then press the <userinput>Enter</userinput> key.
  </para>
  <note>
    The password will not appear on the screen as you type it. This is normal.
  </note>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-superuser.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Next, update the entire installation by entering the command:
  </para>
  <para>
    <userinput>dnf -y update</userinput>
  </para>
  <para>
    Reboot when the update is complete with the command:
  </para>
  <para>
    <userinput>reboot</userinput>
  </para>
  <para>
    The system is now ready to have Rivendell installed.
  </para>
</sect1>

<sect1>
  <title>Running the Installation Script</title>
  <para>
    After the reboot is complete, log back into the desktop, open
    <computeroutput>Terminal</computeroutput> elevate its privileges as
    explained above. Then, enter the following commands:
  </para>
  <para>
    <userinput>wget
    https://software.paravelsystems.com/rhel/8rd4/install_rivendell.sh -P .</userinput>
  </para>
  <para>
    <userinput> chmod 755 install_rivendell.sh</userinput>
  </para>
  <para>
    <userinput>./install_rivendell.sh</userinput>
  </para>
  <para>
    The installer will now start up and display its main menu.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installer_menu.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>

  <para xml:id="installation_modes">
    The installer supports three different &quot;installation modes&quot;
    for Rivendell, as follows:
  </para>
  <para>
    <variablelist>
      <varlistentry>
	<term>Standalone</term>
	<listitem>
	  <para>
	    Install system components (Rivendell application code, MySQL
	    database server and audio file store) on this machine, allowing
	    it to operate as a completely self-contained and autonomous
	    Rivendell system.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>Server</term>
	<listitem>
	  <para>
	    The same as &quot;Standalone&quot;, but will also configure
	    the MySQL database and audio file store components to be shared
	    with additional &quot;client mode&quot; Rivendell systems.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>Client</term>
	<listitem>
	  <para>
	    Install only the Rivendell application code and configure
	    the system to use the MySQL database and audio file store
	    components located on a separate &quot;server&quot; system.
	    You will be prompted to enter the IP address of that server
	    system before the installation starts.
	  </para>
	  <para>
	    The &quot;server&quot; does not actually need to be online
	    during this installation.
	  </para>
	</listitem>
      </varlistentry>
    </variablelist>
  </para>
  <para>
    Enter the number for the type of installation desired, then press the
    <userinput>Enter</userinput> key.
  </para>
  <para>
    Depending upon the speed of the Internet connection, installation will
    typically take around fifteen minutes. When installation is
    complete, reboot the system with the command:
  </para>
  <para>
    <userinput>sudo reboot</userinput>
  </para>
  <para>
    After the reboot, the system is ready for service.
  </para>


  <para>
    Three different types of installation are available. For a stand-alone
    setup (single, self-contained Rivendell system), start the script
    with the command:
  </para>
  <para>
    <userinput>/root/install_rivendell.sh --standalone</userinput>
  </para>
  <para>
    For a server setup (system capable of hosting Rivendell client machines
    that share the server's database and audio store), start the script
    with the command:
  </para>
  <para>
    <userinput>/root/install_rivendell.sh --server</userinput>
  </para>
  <para>
    For a pure client setup (one that uses a central server for the database
    and audio store), first create a host entry for the new client in
    RDAdmin on the server (RDAdmin->ManageHosts->Add), then start the
    script with the command:
  </para>
  <para>
    <userinput>/root/install_rivendell.sh --client</userinput>
  </para>
  <para>
    Depending upon the speed of the Internet connection, installation can take
    between several minutes to an hour or more.  When installation is
    complete, reboot the system with the command:
  </para>
  <para>
    <userinput>reboot</userinput>
  </para>
</sect1>

<sect1>
  <title>Final Details</title>
  <para>
    After rebooting, the system will come back in GUI mode, automatically
    logged in as user <userinput>rd</userinput>.  To secure the system fully,
    perform the following steps:
  </para>
  <orderedlist>
    <listitem>
      <para>
	Open a shell by clicking on the
	<computeroutput>Applications</computeroutput> button in the upper
	right-hand corner of the desktop, selecting the
	<computeroutput>System</computeroutput> menu and clicking on the
	<computeroutput>Xfce Terminal</computeroutput> item.
      </para>
    </listitem>
    <listitem>
      <para>
	Enter the following command to get <userinput>root</userinput>
	permissions:
      </para>
      <para>
	<userinput>su -</userinput>
      </para>
      <para>
	You will be prompted for a password. Enter the root password and
	then press <userinput>Enter</userinput>. The password will not
	be echoed to the screen as you enter it.
      </para>
    </listitem>
    <listitem>
      <para>
	Set the password for the local <userinput>rd</userinput> account
	with the following command:
      </para>
      <para>
	<userinput>passwd rd</userinput>
      </para>
    </listitem>
    <listitem>
      <para>
	Set the MariaDB administrator password with the following command
	(substitute your password for <replaceable>pwd</replaceable>):
      </para>
      <para>
	<userinput>echo "SET PASSWORD FOR root@localhost = 
	PASSWORD('<replaceable>pwd</replaceable>');" |
	mysql -u root</userinput>
      </para>
    </listitem>
    <listitem>
      <para>
	Remove the Rivendell installer script with the following command:
      </para>
      <para>
	<userinput>yum -y remove rivendell-install</userinput>
      </para>
    </listitem>
  </orderedlist>
  <para>
    The system is now ready for service.
  </para>
</sect1>

</article>
