<?xml version="1.0" encoding="ISO-8859-1"?>
<article xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink">
<info>
  <title>Installing Rivendell 4 on a Rocky Linux 9 System</title>
  <author>
    <personname>
      <firstname>Fred</firstname>
      <surname>Gleason</surname>
      <email>fredg@paravelsystems.com</email>
    </personname>
  </author>
</info>

<sect1>
  <title>Warning</title>
  <para>
    This installation HOWTO and the version of Rivendell that it
    installs are intended for testing purposes only. As such, it is
    possible that they contain bugs, including serious ones that could lead
    to LOSS OF DATA! DO NOT use this HOWTO for creating production systems!
  </para>
</sect1>

<sect1>
  <title>Introduction</title>
  <sect2>
    <title>Overview</title>
    <para>
      This HOWTO contains procedures for installing the
      Rivendell Radio Automation System on a system running Rocky
      Linux 9.
    </para>
    <para>
      Installing Rivendell on Rocky Linux 9 consists of three primary steps:
    </para>
    <orderedlist>
      <listitem>
	<para>
	  Install the base distribution and establish an Internet connection.
	</para>
      </listitem>
      <listitem>
	<para>
	  Bootstrap and run the installation script.
	</para>
      </listitem>
      <listitem>
	<para>
	  Secure accounts and finish up final details.
	</para>
      </listitem>
    </orderedlist>
  </sect2>
  <sect2>
    <title>Prerequisites</title>
    <para>
      The following items are required to complete the installation.
    </para>
    <itemizedlist>
      <listitem>
	<para>
	  Target hardware. 64 bit (x86_64) AMD or Intel architecture
	  is supported. For the purposes of this HOWTO, the target machine
	  will be assumed to have a single, blank hard drive. Installations
	  utilizing multiple hard drives (including RAID arrays) are
	  possible, but beyond the scope of this HOWTO.
	</para>
      </listitem>
      <listitem>
	<para>
	  A 'DVD' ISO installer image for RHEL-8, available at
	  <link xlink:href="https://rockylinux.org/download/">
	    https://rockylinux.org/download/</link>.
	    After downloading the ISO image, make a "bootable" USB
	    key using
	    <link xlink:href="https://wiki.centos.org/HowTos/InstallFromUSBkey">
	      these instructions</link>.
	</para>
      </listitem>
      <listitem>
	<para>
	  A working Internet connection.
	</para>
      </listitem>
    </itemizedlist>
  </sect2>
</sect1>

<sect1>
  <title>Installing the Base Distribution</title>
  <para>
    Boot the Rocky 9 installation media (DVD or USB key). You should wind
    up at the initial boot screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-bootscreen.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Highlight the <computeroutput>Install Rocky Linux 9</computeroutput>
    prompt and then press <userinput>Enter</userinput> to start the
    installation.
  </para>
  <para>
    You will be asked to specify the language to use for the install.
    Choose and then touch the <computeroutput>Continue</computeroutput>
    button.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-setlanguage.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    You should then be brought to the
    <computeroutput>INSTALLATION SUMMARY</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-installationsummary.png"  scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Software Selection</computeroutput> item
    to bring up the <computeroutput>SOFTWARE SELECTION</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-softwareselection.png"  scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    In the left-hand pane, select the
    <computeroutput>Workstation</computeroutput> environment, then touch
    the <computeroutput>Done</computeroutput> button to return to the
    <computeroutput>INSTALLATION SUMMARY</computeroutput> screen.
  </para>  
  <para>
    Touch the <computeroutput>INSTALLATION DESTINATION</computeroutput>
    item to bring up the 
    <computeroutput>INSTALLATION DESTINATION</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-installationdestination.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    In the <computeroutput>Storage Configuration</computeroutput> section,
    change the selection from <computeroutput>Automatic</computeroutput> to
    <computeroutput>Custom</computeroutput>.
  </para>
  <warning>
    Do <emphasis>NOT</emphasis> use automatic partitioning! Doing so will
    waste large amounts of disc space while resulting in an installation
    with very little space available for storage of audio!
  </warning>
  <para>
    Touch the <computeroutput>Done</computeroutput> button to bring up the
    <computeroutput>MANUAL PARTITIONING</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-manualpartitioning.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    If there are any existing partitions on the system, delete them by touching
    the <computeroutput>-</computeroutput> button. Then, change the
    paritioning scheme from <computeroutput>LVM</computeroutput> to
    <computeroutput>Standard Partition</computeroutput>.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-manualpartitioning_standard.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>+</computeroutput> button to bring up the
    <computeroutput>ADD A NEW MOUNT POINT</computeroutput> dialog.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-addnewmountpoint.png" scale="50"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Pull down the <computeroutput>Mount Point:</computeroutput> list and
    scan the entries. If you see a <computeroutput>/boot/efi</computeroutput>
    entry, select it, then enter <userinput>1G</userinput> in the
    <computeroutput>Desired Capacity:</computeroutput> field, then
    touch the <computeroutput>Add mount point</computeroutput> button.
  </para>
  <note>
    Depending upon the age and BIOS settings of the target computer, you
    may not see a <computeroutput>/boot/efi</computeroutput> entry, in
    which case simply skip this step and continue creating the other
    partitions as explained below.
  </note>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-addnewmountpointefi.png" scale="50"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Repeat the above procedure, adding the following mount points:
  </para>
  <para>
    <table xml:id="table.mountpoints" frame="all">
      <title>Mount Points</title>
      <tgroup cols="2" align="left" colsep="1" rowsep="1">
	<colspec colname="mountpoint" />
	<colspec colname="desiredcapacity" />
	<thead>
	  <row><entry>Mount Point</entry><entry>Desired Capacity</entry></row>
	</thead>
	<tbody>
	  <row><entry>swap</entry><entry>4G</entry></row>
	  <row><entry>/</entry><entry>25G</entry></row>
	  <row><entry>/home</entry><entry>100G</entry></row>
	  <row><entry>/var</entry><entry>[leave blank]</entry></row>
	</tbody>
      </tgroup>
    </table>
  </para>
  <para>
    After all mount points have been added, touch the
    <computeroutput>Done</computeroutput> button. You may see a
    <computeroutput>SUMMARY OF CHANGES</computeroutput> dialog asking you
    to confirm the partitioning. Touch the
    <computeroutput>Accept Changes</computeroutput> button and return to
    the <computeroutput>INSTALLATION SUMMARY</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-installationsummary1.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Root Password</computeroutput> item to bring
    up the <computeroutput>ROOT PASSWORD</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-installationsummary2.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Enter a password in the two fields. and then touch the
    <computeroutput>Done</computeroutput> button to return to the
    <computeroutput>SUMMARY OF CHANGES</computeroutput> screen.
    <warning>
      DO NOT FORGET WHAT YOU ENTER HERE, AS
      YOU WILL NEED IT TO MANAGE YOUR RIVENDELL SYSTEM!
    </warning>
  </para>
  <para>
    Touch the <computeroutput>User Creation</computeroutput> item to bring
    up the <computeroutput>CREATE USER</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-createuser.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Create a user called <userinput>rd</userinput>, using the settings as
    shown, and then touch the <computeroutput>Done</computeroutput> button
    to return to the <computeroutput>INSTALLATION SUMMARY</computeroutput>
    screen.
  </para>
  <caution>
    To ensure system security, use a password that is different from
    the one used for the <computeroutput>root</computeroutput> account.
  </caution>
  <para>
    Touch the <computeroutput>Begin Installation</computeroutput> button
    to apply your partitioning settings and install RHEL.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-installationprogress.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    When installation is complete, touch the
    <computeroutput>Reboot System</computeroutput> button.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-installationcomplete.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    The system will reboot and come up to the system login screen.
    <computeroutput>INITIAL SETUP</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-loginscreen.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Rivendell Audio</computeroutput> item and
    log in, using the <userinput>Rivendell Audio</userinput> password that
    you created earlier.
  </para>
  <para>
    The system will log in
    and display the <computeroutput>Welcome!</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-welcome.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>No Thanks</computeroutput> button to show
    the Gnome desktop, then enter the word <userinput>settings</userinput>
    in the <computeroutput>Type to search</computeroutput> field at the top
    of the screen and touch the <computeroutput>Settings</computeroutput>
    icon.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-search-settings.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>

<!--
-->
<!--
    Choose the desired language and then touch the
    <computeroutput>Next</computeroutput> button to bring up the
    <computeroutput>Typing</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-typing.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Choose the desired keyboard layout and then touch the
    <computeroutput>Next</computeroutput> button to bring up the
    <computeroutput>Privacy</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-privacy.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Set the <computeroutput>Location Services</computeroutput> as desired
    then touch the <computeroutput>Next</computeroutput> button to bring
    up the <computeroutput>Connect Your Online Accounts</computeroutput>
    screen. Touch the <computeroutput>Skip</computeroutput> button to
    bring up the <computeroutput>Ready to Go</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-readytogo.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the
    <computeroutput>Start Using Red Hat Enterprise Linux</computeroutput>
    button to bring up the <computeroutput>Getting Started</computeroutput>
    window.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-gettingstarted.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-gnomedesktop.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the Down Arrow in the upper right-hand corner of the desktop and
    then touch the &quot;Tool&quot; icon to open the
    <computeroutput>Settings</computeroutput> applet.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-settings.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
-->
  <para>
    Touch the <computeroutput>Network</computeroutput> item in the left-hand
    pane and configure network access as is appropriate for your site. Close
    the <computeroutput>Settings</computeroutput> applet when you're done.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-network.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Next, touch the <computeroutput>Terminal</computeroutput> icon to open a
    Terminal window.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-terminal-window.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Enter the following into the terminal to
    elevate its privileges to <userinput>root</userinput>:
  </para>
  <para>
    <userinput>su -</userinput>
  </para>
  <para>
    You will be prompted for the user &quot;root&quot; password that was
    created earlier. Type it,
    and then press the <userinput>Enter</userinput> key.
  </para>
  <note>
    The password will not appear on the screen as you type it. This is normal.
  </note>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-superuser.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Next, set the host name of the machine by entering the following:
    <userinput>hostnamectl set-hostname <replaceable>hostname</replaceable></userinput>,
    where <replaceable>hostname</replaceable> is the name. The name
    should be all lower-case, alphanumeric and not more than 32 characters.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-sethostname.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    The system is now ready to have Rivendell installed.
  </para>
</sect1>

<sect1>
  <title>Running the Installation Script</title>
  <para>
    Enter the following commands into the terminal window:
  </para>
  <para>
    <userinput>wget
    https://software.paravelsystems.com/rhel/9rd4/install_rivendell.sh -P .</userinput>
  </para>
  <para>
    <userinput> chmod 755 install_rivendell.sh</userinput>
  </para>
  <para>
    <userinput>./install_rivendell.sh</userinput>
  </para>
  <para>
    The installer will now start up and display its main menu.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel9-installer_menu.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>

  <para xml:id="installation_modes">
    The installer supports three different &quot;installation modes&quot;
    for Rivendell, as follows:
  </para>
  <para>
    <variablelist>
      <varlistentry>
	<term>Standalone</term>
	<listitem>
	  <para>
	    Install system components (Rivendell application code, MariaDB
	    database server and audio file store) on this machine, allowing
	    it to operate as a completely self-contained and autonomous
	    Rivendell system.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>Server</term>
	<listitem>
	  <para>
	    The same as &quot;Standalone&quot;, but will also configure
	    the MariaDB database and audio file store components to be shared
	    with additional &quot;client mode&quot; Rivendell systems.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>Client</term>
	<listitem>
	  <para>
	    Install only the Rivendell application code and configure
	    the system to use the MariaDB database and audio file store
	    components located on a separate &quot;server&quot; system.
	    You will be prompted to enter the IP address of that server
	    system before the installation starts.
	  </para>
	  <para>
	    The &quot;server&quot; does not actually need to be online
	    during this installation.
	  </para>
	</listitem>
      </varlistentry>
    </variablelist>
  </para>
  <para>
    Enter the number for the type of installation desired, then press the
    <userinput>Enter</userinput> key.
  </para>
  <para>
    Depending upon the speed of the Internet connection, installation can take
    between several minutes to an hour or more.  When installation is
    complete, reboot the system with the command:
  </para>
  <para>
    <userinput>reboot</userinput>
  </para>
</sect1>

<sect1>
  <title>Final Details</title>
  <para>
    After rebooting, the system will come back in GUI mode. To secure the
    system fully, open a <computeroutput>Terminal</computeroutput> as
    directed above and perform the following steps:
  </para>
  <orderedlist>
    <listitem>
      <para>
	If you used the &quot;Standalone&quot; or &quot;Server&quot;
	installation modes above, set the MariaDB administrator password
	with the following command (substitute your password for
	<replaceable>pwd</replaceable>):
      </para>
      <para>
	<userinput>echo "SET PASSWORD FOR root@localhost = 
	PASSWORD('<replaceable>pwd</replaceable>');" |
	mysql -u root</userinput>
      </para>
    </listitem>
    <listitem>
      <para>
	Remove the Rivendell installer script with the following command:
      </para>
      <para>
	<userinput>dnf -y remove rhel-rivendell-installer</userinput>
      </para>
    </listitem>
  </orderedlist>
  <para>
    The system is now ready for service.
  </para>
</sect1>

</article>
