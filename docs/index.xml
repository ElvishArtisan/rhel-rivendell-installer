<?xml version="1.0" encoding="ISO-8859-1"?>
<article xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink">
<info>
  <title>Installing Rivendell 4 on a RedHat Enterprise Linux 8 System</title>
  <author>
    <personname>
      <firstname>Fred</firstname>
      <surname>Gleason</surname>
      <email>fredg@paravelsystems.com</email>
    </personname>
  </author>
</info>

<sect1>
  <title>Warning</title>
  <para>
    This installation HOWTO and the version of Rivendell that it
    installs are intended for testing purposes only. As such, it is
    possible that they contain bugs, including serious ones that could lead
    to LOSS OF DATA! DO NOT use this HOWTO for creating production systems!
  </para>
</sect1>

<sect1>
  <title>Introduction</title>
  <sect2>
    <title>Overview</title>
    <para>
      This HOWTO contains procedures for installing the
      Rivendell Radio Automation System on a system running RedHat
      Enterprise Linux 8 (RHEL-8). While the screenshots are specific to
      RHEL-8, these instructions are also applicable to other distributions
      derived from RedHat Enterprise 8.
    </para>
    <para>
      Installing Rivendell on RHEL-8 consists of three primary steps:
    </para>
    <orderedlist>
      <listitem>
	<para>
	  Install the base distribution and establish an Internet connection.
	</para>
      </listitem>
      <listitem>
	<para>
	  Bootstrap and run the installation script.
	</para>
      </listitem>
      <listitem>
	<para>
	  Secure accounts and finish up final details.
	</para>
      </listitem>
    </orderedlist>
  </sect2>
  <sect2>
    <title>Prerequisites</title>
    <para>
      The following items are required to complete the installation.
    </para>
    <itemizedlist>
      <listitem>
	<para>
	  Target hardware. 64 bit (x86_64) AMD or Intel architecture
	  is supported. For the purposes of this HOWTO, the target machine
	  will be assumed to have a single, blank hard drive. Installations
	  utilizing multiple hard drives (including RAID arrays) are
	  possible, but beyond the scope of this HOWTO.
	</para>
      </listitem>
      <listitem>
	<para>
	  A 'DVD' ISO installer image for RHEL-8, available at
	  <link xlink:href="https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux">
	    https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux</link>.
	    After downloading the ISO image, make a "bootable" USB
	    key using
	    <link xlink:href="https://wiki.centos.org/HowTos/InstallFromUSBkey">
	      these instructions</link>.
	</para>
      </listitem>
      <listitem>
	<para>
	  A working Internet connection.
	</para>
      </listitem>
    </itemizedlist>
  </sect2>
</sect1>

<sect1>
  <title>Installing the Base Distribution</title>
  <para>
    Boot the RHEL-8 installation media (DVD or USB key). You should wind
    up at the initial boot screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-bootscreen.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Highlight the <computeroutput>Install Red Hat Enterprise Linux 8</computeroutput>
    prompt and then press <userinput>Enter</userinput> to start the
    installation.
  </para>
  <para>
    You will be asked to specify the language to use for the install.
    Choose and then touch the <computeroutput>Continue</computeroutput>
    button.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-setlanguage.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    You should then be brought to the
    <computeroutput>INSTALLATION SUMMARY</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationsummary.png"  scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Software Selection</computeroutput> item
    to bring up the <computeroutput>SOFTWARE SELECTION</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-softwareselection.png"  scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    In the left-hand pane, select the
    <computeroutput>Workstation</computeroutput> environment, then touch
    the <computeroutput>Done</computeroutput> button to return to the
    <computeroutput>INSTALLATION SUMMARY</computeroutput> screen.
  </para>  
  <para>
    Touch the <computeroutput>INSTALLATION DESTINATION</computeroutput>
    item to bring up the 
    <computeroutput>INSTALLATION DESTINATION</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationdestination.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    In the <computeroutput>Storage Configuration</computeroutput> section,
    change the selection from <computeroutput>Automatic</computeroutput> to
    <computeroutput>Custom</computeroutput>.
  </para>
  <warning>
    Do <emphasis>NOT</emphasis> use automatic partitioning! Doing so will
    waste large amounts of disc space while resulting in an installation
    with very little space available for storage of audio!
  </warning>
  <para>
    Touch the <computeroutput>Done</computeroutput> button to bring up the
    <computeroutput>MANUAL PARTITIONING</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-manualpartitioning.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    If there are any existing partitions on the system, delete them by touching
    the <computeroutput>-</computeroutput> button. Then, change the
    paritioning scheme from <computeroutput>LVM</computeroutput> to
    <computeroutput>Standard Partition</computeroutput>.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-manualpartitioning_standard.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>+</computeroutput> button to bring up the
    <computeroutput>ADD A NEW MOUNT POINT</computeroutput> dialog.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-addnewmountpoint.png" scale="50"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Pull down the <computeroutput>Mount Point:</computeroutput> list and
    scan the entries. If you see a <computeroutput>/boot/efi</computeroutput>
    entry, select it, then enter <userinput>1G</userinput> in the
    <computeroutput>Desired Capacity:</computeroutput> field, then
    touch the <computeroutput>Add mount point</computeroutput> button.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-addnewmountpointefi.png" scale="50"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Repeat the above procedure, adding the following mount points:
  </para>
  <para>
    <table xml:id="table.mountpoints" frame="all">
      <title>Mount Points</title>
      <tgroup cols="2" align="left" colsep="1" rowsep="1">
	<colspec colname="mountpoint" />
	<colspec colname="desiredcapacity" />
	<thead>
	  <row><entry>Mount Point</entry><entry>Desired Capacity</entry></row>
	</thead>
	<tbody>
	  <row><entry>swap</entry><entry>8192M</entry></row>
	  <row><entry>/</entry><entry>25G</entry></row>
	  <row><entry>/home</entry><entry>100G</entry></row>
	  <row><entry>/var</entry><entry>[leave blank]</entry></row>
	</tbody>
      </tgroup>
    </table>
  </para>
  <para>
    After all mount points have been added, touch the
    <computeroutput>Done</computeroutput> button. You may see a
    <computeroutput>SUMMARY OF CHANGES</computeroutput> dialog asking you
    to confirm the partitioning. Touch the
    <computeroutput>Accept Changes</computeroutput> button and return to
    the <computeroutput>INSTALLATION SUMMARY</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationsummary1.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Root Password</computeroutput> item to bring
    up the <computeroutput>ROOT PASSWORD</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationsummary2.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Enter a password in the two fields. and then touch the
    <computeroutput>Done</computeroutput> button to return to the
    <computeroutput>SUMMARY OF CHANGES</computeroutput> screen.
    <warning>
      DO NOT FORGET WHAT YOU ENTER HERE, AS
      YOU WILL NEED IT TO MANAGE YOUR RIVENDELL SYSTEM!
    </warning>
  </para>
  <para>
    Touch the <computeroutput>User Creation</computeroutput> item to bring
    up the <computeroutput>CREATE USER</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-createuser.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Create a user called <userinput>rd</userinput>, using the settings as
    shown, and then touch the <computeroutput>Done</computeroutput> button
    to return to the <computeroutput>INSTALLATION SUMMARY</computeroutput>
    screen.
  </para>
  <caution>
    To ensure system security, use a password that is different from
    the one used for the <computeroutput>root</computeroutput>.
  </caution>
  <para>
    Touch the <computeroutput>Begin Installation</computeroutput> button
    to apply your partitioning settings and install RHEL.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationprogress.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    When installation is complete, touch the
    <computeroutput>Reboot System</computeroutput> button.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installationcomplete.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    The system will reboot and come up to the
    <computeroutput>INITIAL SETUP</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-initialsetup.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>License Information</computeroutput> item
    to bring up the <computeroutput>License Information</computeroutput>
    screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-licenseinformation.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Tick the <computeroutput>I accept the license agreement</computeroutput>
    checkbox and then touch the <computeroutput>Done</computeroutput>
    button to return to the <computeroutput>INITIAL SETUP</computeroutput>
    screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-initialsetup2.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>FINISH CONFIGURATION</computeroutput> button.
    Then Login screen will then appear.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-loginscreen.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Click the <computeroutput>Rivendell Audio</computeroutput> item and
    enter the user password that was set earlier.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-passwordscreen.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    The system will log in
    and display the <computeroutput>Welcome!</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-welcome.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Choose the desired language and then touch the
    <computeroutput>Next</computeroutput> button to bring up the
    <computeroutput>Typing</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-typing.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Choose the desired keyboard layout and then touch the
    <computeroutput>Next</computeroutput> button to bring up the
    <computeroutput>Privacy</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-privacy.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Set the <computeroutput>Location Services</computeroutput> as desired
    then touch the <computeroutput>Next</computeroutput> button to bring
    up the <computeroutput>Connect Your Online Accounts</computeroutput>
    screen. Touch the <computeroutput>Skip</computeroutput> button to
    bring up the <computeroutput>Ready to Go</computeroutput> screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-readytogo.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the
    <computeroutput>Start Using Red Hat Enterprise Linux</computeroutput>
    button to bring up the <computeroutput>Getting Started</computeroutput>
    window.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-gettingstarted.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the 'X' in the upper right-hand corner to dismiss the
    window and show the Gnome Desktop.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-gnomedesktop.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the Down Arrow in the upper right-hand corner of the desktop and
    then touch the &quot;Tool&quot; icon to open the
    <computeroutput>Settings</computeroutput> applet.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-settings.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Network</computeroutput> item in the left-hand
    pane and configure network access as is appropriate for your site.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-network.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Next, touch the <computeroutput>Details</computeroutput> item in the
    left-hand pane to bring up the <computeroutput>About</computeroutput>
    screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-details-about.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>Register</computeroutput> button to bring up
    the <computeroutput>Register System</computeroutput> dialog.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-registersystem.png" scale="70"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Enter the <computeroutput>Login</computeroutput> and
    <computeroutput>Password</computeroutput> for a Red Hat account
    authorized to issue a subscription and then touch the
    <computeroutput>Register</computeroutput> button. The system will
    prompt for an &quot;Administrator&quot; password.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-administratorpassword.png" scale="70"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Enter the &quot;root&quot; password that you created earlier and
    then touch the <computeroutput>Authenticate</computeroutput> button.
    The system will return to the <computeroutput>About</computeroutput>
    screen.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-details-about2.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the <computeroutput>View Updates</computeroutput> button to
    bring up a list of available updates.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-available_updates.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Touch the
    <computeroutput>Download</computeroutput> to download them. When download
    is complete, touch the <computeroutput>Restart &amp; Update</computeroutput>
    button to begin the update process.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installingupdates.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    After installing the updates, the system will reboot. Log back in as
    user <userinput>rd</userinput>, then open a
    <computeroutput>Terminal</computeroutput> by touching the
    &quot;Activities&quot; item in the upper left-hand corner of the desktop
    and then the <computeroutput>Terminal</computeroutput> icon.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-startterminal.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Enter the following into the terminal to
    elevate its privileges to <userinput>root</userinput>:
  </para>
  <para>
    <userinput>su -</userinput>
  </para>
  <para>
    You will be prompted for the user &quot;root&quot; password. Type it,
    and then press the <userinput>Enter</userinput> key.
  </para>
  <note>
    The password will not appear on the screen as you type it. This is normal.
  </note>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-superuser.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    Next, set the host name of the machine by entering the following:
    <userinput>hostnamectl set-hostname <replaceable>hostname</replaceable></userinput>,
    where <replaceable>hostname</replaceable> is the name. The name
    should be all lower-case, alphanumeric and not more than 32 characters.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-sethostname.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>
  <para>
    The system is now ready to have Rivendell installed.
  </para>
</sect1>

<sect1>
  <title>Running the Installation Script</title>
  <para>
    Enter the following commands:
  </para>
  <para>
    <userinput>wget
    https://software.paravelsystems.com/rhel/8rd4/install_rivendell.sh -P .</userinput>
  </para>
  <para>
    <userinput> chmod 755 install_rivendell.sh</userinput>
  </para>
  <para>
    <userinput>./install_rivendell.sh</userinput>
  </para>
  <para>
    The installer will now start up and display its main menu.
  </para>
  <para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="rhel8-installer_menu.png" scale="90"/>
      </imageobject>
    </mediaobject>
  </para>

  <para xml:id="installation_modes">
    The installer supports three different &quot;installation modes&quot;
    for Rivendell, as follows:
  </para>
  <para>
    <variablelist>
      <varlistentry>
	<term>Standalone</term>
	<listitem>
	  <para>
	    Install system components (Rivendell application code, MariaDB
	    database server and audio file store) on this machine, allowing
	    it to operate as a completely self-contained and autonomous
	    Rivendell system.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>Server</term>
	<listitem>
	  <para>
	    The same as &quot;Standalone&quot;, but will also configure
	    the MariaDB database and audio file store components to be shared
	    with additional &quot;client mode&quot; Rivendell systems.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>Client</term>
	<listitem>
	  <para>
            Install just the Rivendell application components, configuring
            it to use the database and audio store on one or two shared
            server(s).
            You will be prompted for the IP address of the server(s), as well
            as the name of the database and the username / password of a
            MariaDB database account for accessing the Rivendell database on
            that server.
          </para>
          <note>
            When prompted to enter the IP address of the NFS server that
            holds the Rivendell audio store, simply hit the
            <userinput>Enter</userinput> key if it is on the same server as
            the MariaDB database (almost always the case).
          </note>
	</listitem>
      </varlistentry>
    </variablelist>
  </para>
  <para>
    Enter the number for the type of installation desired, then press the
    <userinput>Enter</userinput> key.
  </para>
  <para>
    Depending upon the speed of the Internet connection, installation can take
    between several minutes to fifteen minutes or more. When installation is
    complete, reboot the system with the command:
  </para>
  <para>
    <userinput>reboot</userinput>
  </para>
</sect1>

<sect1>
  <title>Final Details</title>
  <para>
    After rebooting, the system will come back in GUI mode. To secure the
    system fully, open a <computeroutput>Terminal</computeroutput> as
    directed above and perform the following steps:
  </para>
  <orderedlist>
    <listitem>
      <para>
	If you used the &quot;Standalone&quot; or &quot;Server&quot;
	installation modes above, set the MariaDB administrator password
	with the following command (substitute your password for
	<replaceable>pwd</replaceable>):
      </para>
      <para>
	<userinput>echo "SET PASSWORD FOR root@localhost = 
	PASSWORD('<replaceable>pwd</replaceable>');" |
	mysql -u root</userinput>
      </para>
    </listitem>
    <listitem>
      <para>
	Remove the Rivendell installer script with the following command:
      </para>
      <para>
	<userinput>dnf -y remove rhel-rivendell-installer</userinput>
      </para>
    </listitem>
  </orderedlist>
  <para>
    The system is now ready for service.
  </para>
</sect1>

</article>
